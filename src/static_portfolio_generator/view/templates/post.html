{% extends "base.html" %}
{% block title %}{{ post.title | safe | striptags }} · {{ site_title }}{% endblock %}

{% block content %}

<!-- Structured Data for SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ post.title | safe | striptags }}",
  "author": {
    "@type": "Person",
    "name": "{{ author }}"
  },
  "url": "{{ base_url }}/posts/{{ post.slug }}/",
  "datePublished": "{{ post.created_at }}",
  "dateModified": "{{ post.updated_at or post.created_at }}",
  "description": "{{ post.summary_html | safe | striptags | truncate(200) }}"
  {% if post.tags %},"keywords": "{{ post.tags | join(', ') }}"{% endif %}
}
</script>

<article class="post container">
  <!-- Post Header -->
  <header class="post-header">
    <h1>{{ post.title | safe | striptags }}</h1>
    <p class="muted">
      {% if post.created_at %}Published: {{ post.created_at }}{% endif %}
      {% if post.updated_at and post.updated_at != post.created_at %} &nbsp;|&nbsp; Last updated: {{ post.updated_at
      }}{% endif %}
    </p>

    {% if post.tags %}
    <p class="tags">
      {% for tag in post.tags %}
      <span class="tag">{{ tag.strip() }}</span>{% if not loop.last %}, {% endif %}
      {% endfor %}
    </p>
    {% endif %}
  </header>

  <!-- Post Content -->
  <div class="post-body">
    {{ post.body_html | safe }}
  </div>

  <!-- Back link -->
  <p class="back-link">
    <a href="{{ (base_url | default('/')).rstrip('/') }}/index.html" aria-label="Back to Home">← Back to Home</a>
  </p>
</article>

{% endblock %}